"use strict";
var Sequelize, basename, config, db, env, fs, path, sequelize,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

fs = require("fs");

path = require("path");

Sequelize = require("sequelize");

basename = path.basename(module.filename);

env = process.env.NODE_ENV || "development";

config = require(__dirname + '/../config/config.json')[env];

config.host = process.env.DATABASE_URL;

sequelize = new Sequelize(config.database, config.username, config.password, config);

db = {};

fs.readdirSync(__dirname).filter(function(file) {
  return (file.indexOf(".") !== 0) && (file !== basename);
}).forEach(function(file) {
  var model;
  model = sequelize["import"](path.join(__dirname, file));
  return db[model.name] = model;
});

Object.keys(db).forEach(function(modelName) {
  if (indexOf.call(db[modelName], "associate") >= 0) {
    return db[modelName].associate(db);
  }
});

db.sequelize = sequelize;

db.Sequelize = Sequelize;

module.exports = db;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFBLENBQUE7QUFBQSxJQUFBLHlEQUFBO0VBQUEsbUpBQUE7O0FBQUEsRUFDQSxHQUFZLE9BQUEsQ0FBUSxJQUFSLENBRFosQ0FBQTs7QUFBQSxJQUVBLEdBQVksT0FBQSxDQUFRLE1BQVIsQ0FGWixDQUFBOztBQUFBLFNBR0EsR0FBWSxPQUFBLENBQVEsV0FBUixDQUhaLENBQUE7O0FBQUEsUUFJQSxHQUFZLElBQUksQ0FBQyxRQUFMLENBQWMsTUFBTSxDQUFDLFFBQXJCLENBSlosQ0FBQTs7QUFBQSxHQUtBLEdBQVksT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFaLElBQXdCLGFBTHBDLENBQUE7O0FBQUEsTUFNQSxHQUFZLE9BQUEsQ0FBUSxTQUFBLEdBQVksd0JBQXBCLENBQThDLENBQUEsR0FBQSxDQU4xRCxDQUFBOztBQUFBLE1BUU0sQ0FBQyxJQUFQLEdBQWMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxZQVIxQixDQUFBOztBQUFBLFNBVUEsR0FBZ0IsSUFBQSxTQUFBLENBQVUsTUFBTSxDQUFDLFFBQWpCLEVBQTJCLE1BQU0sQ0FBQyxRQUFsQyxFQUE0QyxNQUFNLENBQUMsUUFBbkQsRUFBNkQsTUFBN0QsQ0FWaEIsQ0FBQTs7QUFBQSxFQVdBLEdBQVksRUFYWixDQUFBOztBQUFBLEVBaUJFLENBQUMsV0FESCxDQUNlLFNBRGYsQ0FFRSxDQUFDLE1BRkgsQ0FFVyxTQUFDLElBQUQsR0FBQTtBQUNQLFNBQU8sQ0FBQyxJQUFJLENBQUMsT0FBTCxDQUFhLEdBQWIsQ0FBQSxLQUF1QixDQUF4QixDQUFBLElBQStCLENBQUMsSUFBQSxLQUFVLFFBQVgsQ0FBdEMsQ0FETztBQUFBLENBRlgsQ0FLRSxDQUFDLE9BTEgsQ0FLVyxTQUFDLElBQUQsR0FBQTtBQUNQLE1BQUEsS0FBQTtBQUFBLEVBQUEsS0FBQSxHQUFRLFNBQVUsQ0FBQSxRQUFBLENBQVYsQ0FBb0IsSUFBSSxDQUFDLElBQUwsQ0FBVSxTQUFWLEVBQXFCLElBQXJCLENBQXBCLENBQVIsQ0FBQTtTQUNBLEVBQUcsQ0FBQSxLQUFLLENBQUMsSUFBTixDQUFILEdBQWlCLE1BRlY7QUFBQSxDQUxYLENBaEJBLENBQUE7O0FBQUEsTUEwQk0sQ0FBQyxJQUFQLENBQVksRUFBWixDQUFlLENBQUMsT0FBaEIsQ0FBd0IsU0FBQyxTQUFELEdBQUE7QUFDdEIsRUFBQSxJQUFHLGFBQWUsRUFBRyxDQUFBLFNBQUEsQ0FBbEIsRUFBQSxXQUFBLE1BQUg7V0FDRSxFQUFHLENBQUEsU0FBQSxDQUFVLENBQUMsU0FBZCxDQUF3QixFQUF4QixFQURGO0dBRHNCO0FBQUEsQ0FBeEIsQ0ExQkEsQ0FBQTs7QUFBQSxFQThCRSxDQUFDLFNBQUgsR0FBZSxTQTlCZixDQUFBOztBQUFBLEVBK0JFLENBQUMsU0FBSCxHQUFlLFNBL0JmLENBQUE7O0FBQUEsTUFpQ00sQ0FBQyxPQUFQLEdBQWlCLEVBakNqQixDQUFBIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5mcyAgICAgICAgPSByZXF1aXJlKFwiZnNcIik7XG5wYXRoICAgICAgPSByZXF1aXJlKFwicGF0aFwiKTtcblNlcXVlbGl6ZSA9IHJlcXVpcmUoXCJzZXF1ZWxpemVcIik7XG5iYXNlbmFtZSAgPSBwYXRoLmJhc2VuYW1lKG1vZHVsZS5maWxlbmFtZSk7XG5lbnYgICAgICAgPSBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCBcImRldmVsb3BtZW50XCI7XG5jb25maWcgICAgPSByZXF1aXJlKF9fZGlybmFtZSArICcvLi4vY29uZmlnL2NvbmZpZy5qc29uJylbZW52XTtcblxuY29uZmlnLmhvc3QgPSBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkxcblxuc2VxdWVsaXplID0gbmV3IFNlcXVlbGl6ZShjb25maWcuZGF0YWJhc2UsIGNvbmZpZy51c2VybmFtZSwgY29uZmlnLnBhc3N3b3JkLCBjb25maWcpO1xuZGIgICAgICAgID0ge307XG5cblxuXG5cbmZzXG4gIC5yZWFkZGlyU3luYyhfX2Rpcm5hbWUpXG4gIC5maWx0ZXIoIChmaWxlKSAtPlxuICAgIHJldHVybiAoZmlsZS5pbmRleE9mKFwiLlwiKSBpc250IDApIGFuZCAoZmlsZSBpc250IGJhc2VuYW1lKTtcbiAgKVxuICAuZm9yRWFjaCgoZmlsZSkgLT5cbiAgICBtb2RlbCA9IHNlcXVlbGl6ZVtcImltcG9ydFwiXShwYXRoLmpvaW4oX19kaXJuYW1lLCBmaWxlKSk7XG4gICAgZGJbbW9kZWwubmFtZV0gPSBtb2RlbDtcbiAgKVxuXG5PYmplY3Qua2V5cyhkYikuZm9yRWFjaCAobW9kZWxOYW1lKSAtPlxuICBpZiBcImFzc29jaWF0ZVwiIGluIGRiW21vZGVsTmFtZV1cbiAgICBkYlttb2RlbE5hbWVdLmFzc29jaWF0ZShkYik7XG5cbmRiLnNlcXVlbGl6ZSA9IHNlcXVlbGl6ZTtcbmRiLlNlcXVlbGl6ZSA9IFNlcXVlbGl6ZTtcblxubW9kdWxlLmV4cG9ydHMgPSBkYjtcbiJdfQ==