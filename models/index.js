"use strict";
var Sequelize, basename, config, db, env, fs, path, sequelize,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

fs = require("fs");

path = require("path");

Sequelize = require("sequelize");

basename = path.basename(module.filename);

env = process.env.NODE_ENV || "development";

config = require(__dirname + '/../config/config.json')[env];

sequelize = new Sequelize(config.database, config.username, config.password, config);

db = {};

fs.readdirSync(__dirname).filter(function(file) {
  return (file.indexOf(".") !== 0) && (file !== basename);
}).forEach(function(file) {
  var model;
  model = sequelize["import"](path.join(__dirname, file));
  return db[model.name] = model;
});

Object.keys(db).forEach(function(modelName) {
  if (indexOf.call(db[modelName], "associate") >= 0) {
    return db[modelName].associate(db);
  }
});

db.sequelize = sequelize;

db.Sequelize = Sequelize;

module.exports = db;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFBLENBQUE7QUFBQSxJQUFBLHlEQUFBO0VBQUEsbUpBQUE7O0FBQUEsRUFDQSxHQUFZLE9BQUEsQ0FBUSxJQUFSLENBRFosQ0FBQTs7QUFBQSxJQUVBLEdBQVksT0FBQSxDQUFRLE1BQVIsQ0FGWixDQUFBOztBQUFBLFNBR0EsR0FBWSxPQUFBLENBQVEsV0FBUixDQUhaLENBQUE7O0FBQUEsUUFJQSxHQUFZLElBQUksQ0FBQyxRQUFMLENBQWMsTUFBTSxDQUFDLFFBQXJCLENBSlosQ0FBQTs7QUFBQSxHQUtBLEdBQVksT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFaLElBQXdCLGFBTHBDLENBQUE7O0FBQUEsTUFNQSxHQUFZLE9BQUEsQ0FBUSxTQUFBLEdBQVksd0JBQXBCLENBQThDLENBQUEsR0FBQSxDQU4xRCxDQUFBOztBQUFBLFNBT0EsR0FBZ0IsSUFBQSxTQUFBLENBQVUsTUFBTSxDQUFDLFFBQWpCLEVBQTJCLE1BQU0sQ0FBQyxRQUFsQyxFQUE0QyxNQUFNLENBQUMsUUFBbkQsRUFBNkQsTUFBN0QsQ0FQaEIsQ0FBQTs7QUFBQSxFQVFBLEdBQVksRUFSWixDQUFBOztBQUFBLEVBWUUsQ0FBQyxXQURILENBQ2UsU0FEZixDQUVFLENBQUMsTUFGSCxDQUVXLFNBQUMsSUFBRCxHQUFBO0FBQ1AsU0FBTyxDQUFDLElBQUksQ0FBQyxPQUFMLENBQWEsR0FBYixDQUFBLEtBQXVCLENBQXhCLENBQUEsSUFBK0IsQ0FBQyxJQUFBLEtBQVUsUUFBWCxDQUF0QyxDQURPO0FBQUEsQ0FGWCxDQUtFLENBQUMsT0FMSCxDQUtXLFNBQUMsSUFBRCxHQUFBO0FBQ1AsTUFBQSxLQUFBO0FBQUEsRUFBQSxLQUFBLEdBQVEsU0FBVSxDQUFBLFFBQUEsQ0FBVixDQUFvQixJQUFJLENBQUMsSUFBTCxDQUFVLFNBQVYsRUFBcUIsSUFBckIsQ0FBcEIsQ0FBUixDQUFBO1NBQ0EsRUFBRyxDQUFBLEtBQUssQ0FBQyxJQUFOLENBQUgsR0FBaUIsTUFGVjtBQUFBLENBTFgsQ0FYQSxDQUFBOztBQUFBLE1BcUJNLENBQUMsSUFBUCxDQUFZLEVBQVosQ0FBZSxDQUFDLE9BQWhCLENBQXdCLFNBQUMsU0FBRCxHQUFBO0FBQ3RCLEVBQUEsSUFBRyxhQUFlLEVBQUcsQ0FBQSxTQUFBLENBQWxCLEVBQUEsV0FBQSxNQUFIO1dBQ0UsRUFBRyxDQUFBLFNBQUEsQ0FBVSxDQUFDLFNBQWQsQ0FBd0IsRUFBeEIsRUFERjtHQURzQjtBQUFBLENBQXhCLENBckJBLENBQUE7O0FBQUEsRUF5QkUsQ0FBQyxTQUFILEdBQWUsU0F6QmYsQ0FBQTs7QUFBQSxFQTBCRSxDQUFDLFNBQUgsR0FBZSxTQTFCZixDQUFBOztBQUFBLE1BNEJNLENBQUMsT0FBUCxHQUFpQixFQTVCakIsQ0FBQSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuZnMgICAgICAgID0gcmVxdWlyZShcImZzXCIpO1xucGF0aCAgICAgID0gcmVxdWlyZShcInBhdGhcIik7XG5TZXF1ZWxpemUgPSByZXF1aXJlKFwic2VxdWVsaXplXCIpO1xuYmFzZW5hbWUgID0gcGF0aC5iYXNlbmFtZShtb2R1bGUuZmlsZW5hbWUpO1xuZW52ICAgICAgID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgXCJkZXZlbG9wbWVudFwiO1xuY29uZmlnICAgID0gcmVxdWlyZShfX2Rpcm5hbWUgKyAnLy4uL2NvbmZpZy9jb25maWcuanNvbicpW2Vudl07XG5zZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKGNvbmZpZy5kYXRhYmFzZSwgY29uZmlnLnVzZXJuYW1lLCBjb25maWcucGFzc3dvcmQsIGNvbmZpZyk7XG5kYiAgICAgICAgPSB7fTtcblxuXG5mc1xuICAucmVhZGRpclN5bmMoX19kaXJuYW1lKVxuICAuZmlsdGVyKCAoZmlsZSkgLT5cbiAgICByZXR1cm4gKGZpbGUuaW5kZXhPZihcIi5cIikgaXNudCAwKSBhbmQgKGZpbGUgaXNudCBiYXNlbmFtZSk7XG4gIClcbiAgLmZvckVhY2goKGZpbGUpIC0+XG4gICAgbW9kZWwgPSBzZXF1ZWxpemVbXCJpbXBvcnRcIl0ocGF0aC5qb2luKF9fZGlybmFtZSwgZmlsZSkpO1xuICAgIGRiW21vZGVsLm5hbWVdID0gbW9kZWw7XG4gIClcblxuT2JqZWN0LmtleXMoZGIpLmZvckVhY2ggKG1vZGVsTmFtZSkgLT5cbiAgaWYgXCJhc3NvY2lhdGVcIiBpbiBkYlttb2RlbE5hbWVdXG4gICAgZGJbbW9kZWxOYW1lXS5hc3NvY2lhdGUoZGIpO1xuXG5kYi5zZXF1ZWxpemUgPSBzZXF1ZWxpemU7XG5kYi5TZXF1ZWxpemUgPSBTZXF1ZWxpemU7XG5cbm1vZHVsZS5leHBvcnRzID0gZGI7XG4iXX0=